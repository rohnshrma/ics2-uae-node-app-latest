<!-- =============== -->

<%- include("partials/AdminHeader") -%>

  <!-- Main Dashboard Content -->
  <div class="container-fluid py-4" style="background-color: #f8f9fa;">
    <div class="container">
      <!-- Dashboard Header -->
      <div class="row mb-4">
        <div class="col-12">
          <h1 class="display-4 text-center fw-bold" style="color: #2c3e50;">Admin Dashboard</h1>
          <p class="text-center text-muted">Manage your events and members</p>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="row g-4 mb-5">
        <!-- Events Count Card -->
        <div class="col-md-6">
          <div class="card border-0 h-100"
            style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-calendar-event text-white fs-4 me-2"></i> &nbsp;
                <h5 class="card-title text-white mb-0">Total Events</h5>
              </div>
              <h2 class="display-3 text-white fw-bold mb-0">
                <%= eventCount %>
              </h2>
              <p class="text-white-50 mt-2 mb-0">Active events in the system</p>
            </div>
          </div>
        </div>

        <!-- Members Count Card -->
        <div class="col-md-6">
          <div class="card border-0 h-100"
            style="background: linear-gradient(135deg, #34d399 0%, #10b981 100%); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-people text-white fs-4 me-2"></i> &nbsp;
                <h5 class="card-title text-white mb-0">Total Members</h5>
              </div>
              <h2 class="display-3 text-white fw-bold mb-0">
                <%= memberCount %>
              </h2>
              <p class="text-white-50 mt-2 mb-0">Registered members</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Event List Section -->
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-white py-3">
          <h2 class="h4 mb-0 fw-bold" style="color: #2c3e50;">Event Management</h2>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="bg-light">
                <tr>
                  <th class="py-3 px-4">Event</th>
                  <th class="py-3">Details</th>
                  <th class="py-3">Date & Time</th>
                  <th class="py-3 text-end pe-4">Actions</th>
                </tr>
              </thead>
              <tbody>
                <% events.forEach(event=> { %>
                  <tr>
                    <td class="py-3 px-4" style="width: 200px;">
                      <img src="/<%= event.eventImage %>" alt="<%= event.eventName%>" class="img-fluid rounded"
                        style="max-height: 100px; object-fit: cover;">
                    </td>
                    <td class="py-3">
                      <h5 class="mb-1 fw-semibold">
                        <%= event.eventName %>
                      </h5>
                      <p class="text-muted mb-0"
                        style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                        <%= event.eventDescription %>
                      </p>
                    </td>
                    <td class="py-3">
                      <div class="d-flex flex-column">
                        <span class="text-body-secondary mb-2">
                          <i class="bi bi-calendar me-2"></i>
                          <%= new Date(event.eventDateTime).toLocaleDateString("en-IN", { timeZone: "Asia/Kolkata" }) %>
                        </span>
                        <span class="text-body-secondary">
                          <i class="bi bi-clock me-2"></i>
                          <%= new Date(event.eventDateTime).toLocaleTimeString("en-IN", { timeZone: "Asia/Kolkata" }) %>
                        </span>
                      </div>
                    </td>
                    <td class="text-end pe-4">
                      <a href="/admin/delete-event/<%=event.id%>" class="btn btn-danger btn-sm px-3"
                        style="border-radius: 20px;">
                        <i class="bi bi-trash me-1"></i> Delete
                      </a>
                    </td>
                  </tr>
                  <% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Icons CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>

  </html>